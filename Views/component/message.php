<?php 

$posts=[
    [
        "id" => 1,
        "user"=> "tnk@engineer",
        "content"=> "‰∫∫„ÇíÁ¨ë„Çè„Åõ„Çã„Åì„Å®„ÇíÂøó„Åó„Å¶„Åç„Åæ„Åó„Åü„ÄÇ„Åü„Åè„Åï„Çì„ÅÆ‰∫∫„ÅåËá™ÂàÜ„ÅÆ‰∫ã„ÅßÁ¨ë„Åà„Å™„Åè„Å™„Çä„ÄÅ„Åü„Å†„Åü„Å†Âõ∞ÊÉë„Åó„ÄÅÊÇî„Åó„ÅèÊÇ≤„Åó„ÅÑ„Åß„Åô„ÄÇ„ÄÇ„ÄÇ„ÄÇ‰∏ñÈñì„Å´ÁúüÂÆü„Åå‰ºù„Çè„Çä„ÄÅ‰∏ÄÊó•„ÇÇÊó©„Åè„ÄÅ„ÅäÁ¨ë„ÅÑ„Åå„Åó„Åü„ÅÑ„Åß„Åô„ÄÇ",
        "likes"=> 23,
        "comments"=> [
            [
                "user"=> "mng_nq",
                "comment"=> "„Åä„ÇÅ„Åß„Å®„ÅÜÔºÅÊ¨°„ÇÇÈ†ëÂºµ„Å£„Å¶ÔºÅ"
            ]
        ],
        "image"=> "https://example.com/path/to/image.jpg",
        "notificationType" =>"follow",
        "message" => "Âàù„ÇÅ„Åæ„Åó„Å¶„ÄÇ„Äá„ÄáÊ†™Âºè‰ºöÁ§æ„ÅÆ‰ºäËó§„Å®Áî≥„Åó„Åæ„ÅôÂÖàÊó•„ÅØ..."
    ],
    [
        "id" => 2,
        "user"=> "„ÅÇ„Åï„Åãüê∞",
        "content"=> "ÈÖç‰ø°ÈÅÖ„Çå„Å¶Áî≥„ÅóË®≥„Åî„Åñ„ÅÑ„Åæ„Åõ„Çì.‰ªäÊó•„ÅØÂ±±Ê†π„Åß„Åô„ÄÇÈáç„Å≠„Å¶Áî≥„ÅóË®≥„Åî„Åñ„ÅÑ„Åæ„Åõ„Çì",
        "likes"=> 23,
        "comments"=> [
            [
                "user"=> "mng_nq",
                "comment"=> "„Åä„ÇÅ„Åß„Å®„ÅÜÔºÅÊ¨°„ÇÇÈ†ëÂºµ„Å£„Å¶ÔºÅ"
            ]
        ],
        "image"=> "https://example.com/path/to/image.jpg",
        "notificationType" =>"follow",
        "message" => "ÂÖàÊó•„ÅäË©±„Åó„Åü‰ª∂„Å´„Å§„ÅÑ„Å¶Á¢∫Ë™ç„Åï„Åõ„Å¶„ÅÑ„Åü„Å†„Åç„Åü„ÅÑ„ÅÆ„Åß„Åô„Åå„ÄÅ„ÅîÈÉΩÂêà„ÅÆËâØ„ÅÑ„Å´„ÅØ„ÅÇ„Çä„Åæ„Åô„Åß„Åó„Çá„ÅÜ„Åã..."
    ],
    [
        "id" => 3,
        "user"=> "ryotakasannnnnnn@SESÂñ∂Ê•≠",
        "content"=> "‰ªäÊó•„ÅØÁ¥†Êô¥„Çâ„Åó„ÅÑ‰∏ÄÊó•„Åß„Åó„ÅüÔºÅÊúÄËøë„ÅÆ„Éó„É≠„Ç∏„Çß„ÇØ„Éà„ÅåÁÑ°‰∫ã„Å´ÂÆå‰∫Ü„Åó„ÄÅ„ÉÅ„Éº„É†ÂÖ®‰Ωì„Åß„ÅäÁ•ù„ÅÑ„Åß„Åô„ÄÇÊ¨°„ÅÆ„ÉÅ„É£„É¨„É≥„Ç∏„Å´Âêë„Åë„Å¶„ÄÅ„Åì„Çå„Åã„Çâ„ÇÇÈ†ëÂºµ„Çä„Åæ„Åô„ÄÇ",
        "likes"=> 23,
        "comments"=> [
            [
                "user"=> "mng_nq",
                "comment"=> "„Åä„ÇÅ„Åß„Å®„ÅÜÔºÅÊ¨°„ÇÇÈ†ëÂºµ„Å£„Å¶ÔºÅ"
            ]
        ],
        "image"=> "https://example.com/path/to/image.jpg",
        "notificationType" =>"like",
        "message" => "„Åä‰∏ñË©±„Å´„Å™„Å£„Å¶„Åä„Çä„Åæ„Åô„ÄÇ„Äá„ÄáÊ†™Âºè‰ºöÁ§æ„ÅÆÊñéËó§„Å®Áî≥„Åó„Åæ„Åô„ÄÇÂÖàÊó•„ÅØ...."
    ],
    [
        "id" => 4,
        "user"=> "„Åô„Åé„Å£„Å®/StudioDECER",
        "content"=> "Âü∫Êú¨ÊÉÖÂ†±ÊäÄË°ìËÄÖË©¶È®ì„ÄÅË¶ã‰∫ãÂêàÊ†º„ÄúÔºÅÂπ¥Êú´Âπ¥ÂßãÔºü„Åù„Çì„Å™„ÅÆÈñ¢‰øÇ„Å≠„ÅáÔºÅÔºÅÂπ¥Êú´Âπ¥ÂßãËøî‰∏ä„ÅåÂÆü„ÇíÁµê„Å≥„Åæ„Åó„Åü",
        "likes"=> 23,
        "comments"=> [
            [
                "user"=> "mng_nq",
                "comment"=> "„Åä„ÇÅ„Åß„Å®„ÅÜÔºÅÊ¨°„ÇÇÈ†ëÂºµ„Å£„Å¶ÔºÅ"
            ]
        ],
        "image"=> "https://example.com/path/to/image.jpg",
        "notificationType" =>"message"
    ],
    [
        "id" => 5,
        "user"=> "utukawa@AIÊÉÖÂ†±Ëß£Ë™¨",
        "content"=> "‰∫∫„ÇíÁ¨ë„Çè„Åõ„Çã„Åì„Å®„ÇíÂøó„Åó„Å¶„Åç„Åæ„Åó„Åü„ÄÇ„Åü„Åè„Åï„Çì„ÅÆ‰∫∫„ÅåËá™ÂàÜ„ÅÆ‰∫ã„ÅßÁ¨ë„Åà„Å™„Åè„Å™„Çä„ÄÅ„Åü„Å†„Åü„Å†Âõ∞ÊÉë„Åó„ÄÅÊÇî„Åó„ÅèÊÇ≤„Åó„ÅÑ„Åß„Åô„ÄÇ„ÄÇ„ÄÇ„ÄÇ‰∏ñÈñì„Å´ÁúüÂÆü„Åå‰ºù„Çè„Çä„ÄÅ‰∏ÄÊó•„ÇÇÊó©„Åè„ÄÅ„ÅäÁ¨ë„ÅÑ„Åå„Åó„Åü„ÅÑ„Åß„Åô„ÄÇ",
        "likes"=> 23,
        "comments"=> [
            [
                "user"=> "mng_nq",
                "comment"=> "„Åä„ÇÅ„Åß„Å®„ÅÜÔºÅÊ¨°„ÇÇÈ†ëÂºµ„Å£„Å¶ÔºÅ"
            ]
        ],
        "image"=> "https://example.com/path/to/image.jpg",
        "notificationType" =>"reply"
    ],
]
?>
<div class="row d-flex w-100 vh-100">
    <div class="col-2">
    </div>
    <div class="col-4  d-flex flex-column justify-content-start border ">
        <!-- „Éà„É¨„É≥„Éâor„Éï„Ç©„É≠„ÉØ„Éº-->
        <div class="btn-group border-bottom " role="group" aria-label="Basic example">
            <a href="/homepage">
                <span class="material-symbols-outlined fs-2">arrow_back</span>
            </a>
            <div class="pt-1 fs-2">„É°„ÉÉ„Çª„Éº„Ç∏</div>
        </div>
        
        <div class="tab-content">
            <div class="tab-pane fade show active" id="post-content">
                <!-- Dynamic content for Trend should be loaded here -->
                <ul id ="messageList" class="list-group list-unstyled">
                    <?php foreach ($groupedMessages as $groupedMessage): ?>
                            <li class="list-group-item post border-top pt-2 pb-2" id="message-<?= htmlspecialchars($groupedMessage['username']) ?>">
                                <div class="d-flex">
                                    <span class="material-symbols-outlined fs-1">account_circle</span>
                                    <p class="mt-2"> <?= htmlspecialchars($groupedMessage['username']) ?></p>
                                </div>
                            </li>
                    <?php endforeach; ?>
                </ul>
            </div>
        </div>
    </div>
    <div class="col-6 message-area d-flex flex-column vh-100">
        <div id="default-message" class="d-flex flex-grow-1 justify-content-center align-items-center" >
            <div class="text-center" style="display:none;">
               <h1>„É°„ÉÉ„Çª„Éº„Ç∏„ÇíÈÅ∏Êäû</h1>
                <p>Êó¢Â≠ò„ÅÆ‰ºöË©±„Åã„ÇâÈÅ∏Êäû„Åó„Åü„Çä„ÄÅÊñ∞„Åó„ÅÑ‰ºöË©±„ÇíÈñãÂßã„Åó„Åü„Çä„Åß„Åç„Åæ„Åô„ÄÇ</h3>
            </div>
        </div>
        <?php foreach ($groupedMessages as $groupedMessage): ?>
            <!-- „É°„ÉÉ„Çª„Éº„Ç∏„Éò„ÉÉ„ÉÄ„Éº -->

            <div id="content-<?= htmlspecialchars($groupedMessage['username']) ?>" class="message-content" style="display:none;">
                <?php foreach ($groupedMessage['messages'] as $message): ?>
                    <div  class="flex-grow-1 overflow-auto p-3">
                        <?php if ($message['send_user_id'] != $loginUserId):?>
                            <div class="d-flex mb-3">
                                <div class="bg-light rounded p-2">
                                    <p class="mb-0"><?= htmlspecialchars($message['message']) ?></p>
                                </div>
                            </div>
                        <?php else: ?>
                            <div class="d-flex justify-content-end mb-3">
                                <div class="bg-primary text-white rounded p-2">
                                    <p class="mb-0"><?= htmlspecialchars($message['message']) ?></p>
                                </div>
                                <span class="material-symbols-outlined fs-1">account_circle</span>
                            </div>
                        <?php endif; ?>
                    </div>
                <?php endforeach; ?>
            </div>
        <?php endforeach; ?>
        <div class="border-top p-3 d-flex">
            <input type="text" class="form-control mr-2" placeholder="Êñ∞„Åó„ÅÑ„É°„ÉÉ„Çª„Éº„Ç∏„Çí‰ΩúÊàê">
            <button class="btn btn-primary">ÈÄÅ‰ø°</button>
        </div>
    </div>
</div>

<script src="/js/message.js"></script>

<!-- messageÁîªÈù¢„ÇíË°®Á§∫
‚ÜíÂêÑ„É¶„Éº„Ç∂„Å®„ÅÆ„É°„ÉÉ„Çª„Éº„Ç∏„Éú„ÉÉ„ÇØ„Çπ„É™„Çπ„Éà„ÅÆË°®Á§∫ÔºàÂêÑÁõ∏Êâã„Å®„ÅÆ„É°„ÉÉ„Çª„Éº„Ç∏„ÇÇ„Åô„Åπ„Å¶Âè≥ÂÅ¥„ÅÆ„Ç®„É™„Ç¢„Å´„É¨„É≥„ÉÄ„É™„É≥„Ç∞„Åó„Å¶„ÄÅÂêÑ„É°„ÉÉ„Çª„Éº„Ç∏„Éú„ÉÉ„ÇØ„Çπ„ÇíÊäº„Åô„Å®display„ÅåblockÊãÖ„Å£„Å¶Ë°®Á§∫„Åï„Çå„ÇãÊÑü„Åò„Å´„Åô„Çã„ÅãÔºâ
‚ÜíÂêÑ„Éú„ÉÉ„ÇØ„Çπ„ÇíÊäº„Åô„Å®„É°„ÉÉ„Çª„Éº„Ç∏„Åô„ÇãÁîªÈù¢„ÇíË°®Á§∫
‚ÜíÂêÑ„Éú„ÉÉ„ÇØ„Çπ„ÇíÊäº„Åô„Åü„Å≥„Å´„Åù„ÅÆ„É¶„Éº„Ç∂„Å®„ÅÆ„É°„ÉÉ„Çª„Éº„Ç∏„É≠„Ç∞„ÇíË°®Á§∫„Åô„Çã -->

<!-- ÂêÑ„É™„Çπ„Éà„Éú„ÉÉ„ÇØ„Çπ„Åß„ÅØ„Äå„É¶„Éº„Ç∂„ÅÆÂêçÂâç„Äç„Å®„ÄåÊñ∞ÁùÄ„ÅÆ„É°„ÉÉ„Çª„Éº„Ç∏„Äç„ÇíÈÉ®ÂàÜÁöÑ„Å´Ë°®Á§∫„Åô„Çã -->
<!-- 
<style>
.message-area{
    height:100%;
}
</style> -->
